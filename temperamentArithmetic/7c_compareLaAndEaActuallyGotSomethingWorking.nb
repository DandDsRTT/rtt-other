(*TODO: complete this automated testing of thousands of random examples to make sure LA and EA agree; might want to design this so that it has a much higher likelihood of collinearity *)

randomMatrixAndMultivector2[d_, grade_] := Module[{ m, t, w},
m = RandomInteger[{-9, 9}, {grade, d}];

t = If[RandomInteger[] == 1, {m, "contra"}, {m, "co"}];
w = matrixToMultivector[t];

(*Print["m: ", m, " t: ", t, " w: ", w];*)

{t, w}
];

matrixToMultivector2[a_] := If[a === Error, Error, matrixToMultivector[a]];

f=0;
Do[
d = RandomInteger[{1, 5}];
grade = RandomInteger[{1, d-1}];

tAndW1 = randomMatrixAndMultivector2[d, grade];
t1 = First[tAndW1];
w1 = Last[tAndW1];

tAndW2 = randomMatrixAndMultivector2[d, grade];
t2 = First[tAndW2];
w2 = Last[tAndW2];

Print["d: ", d, " grade: ", grade, " t1: ", t1, " t2: ", t2, " w1: ", w1, " w2: ", w2];

sumByMatrices = matrixToMultivector2[temperamentSum[t1,t2]];
sumByMultivectors = eaTemperamentSum[w1, w2];

If[
sumByMatrices == sumByMultivectors,
Print["by matrices", sumByMatrices, " by multivectors: ", sumByMultivectors, "w1: ", w1, " w2: " w2],
f += 1;
Print["BAD BAD BAD! by matrices: ", sumByMatrices, " by multivectors: ",sumByMultivectors, " w1: ", w1, " w2: ", w2]
],
1
];

Print[f];
